@(user: User)(
implicit req: UserRequest[_], messages: Messages)

@import common._
@import helper._

@layouts.base(UsersCtrl.msg("title")) {

  @common._flashing()

  <div class="page-header">
    <h1>
      <i class="fa fa-user fa-lg fa-fw"></i>
      @if(user.name.self.nonEmpty) {
        @user.name
      } else {
        @user.email
      }
    </h1>
  </div>

  <div class="row" ng-controller="InfoCtrl" data-id="@user.id">
    @{_info(user)}
  </div>
}()(
  libs.webjars("js", "angular-resource"),
  libs.assets("js", "api.helper"),
  libs.assets("js", "api_internal/users"),
  controller
)

@controller = {
  <script>
    angular.module('users.show', ['ui.bootstrap', 'api_internal.user'])
      .controller('InfoCtrl',
        ['$scope', '$attrs', 'User',
        function ($scope, $attrs, User) {
        $scope.groups = User.externalGroups({id: $attrs.id});
      }]);

    angular.module('app').requires.push('users.show');
  </script>
}