@(group: Group)(
implicit req: UserRequest[_], messages: Messages)

@import common._
@import helper._

@layouts.base(GroupsCtrl.msg("title")) {

  @ng._alert()

  <div class="page-header">
    <h1>
      <i class="fa fa-group fa-lg fa-fw"></i>
      @GroupsCtrl.msg("head")
      <small>@group.name</small>
    </h1>
  </div>

  <div class="row">
    @{_info(group)}
  </div>

  <div class="row">
    <div class="col-xs-12">
      <form name="form" class="form-inline"
        ng-controller="NewEntryCtrl" novalidate>

        @ng._form_control("email",
          '_type        -> "email",
          'maxLength    -> 64,
          'email        -> None,
          'placeholder  -> GroupsCtrl.msg("user.email.placeholder"),
          'typeahead    -> "email for email in getUserEmails($viewValue)",
          'autocomplete -> "off",
          Symbol("ng-model") -> "user.email"
        )

        <button type="submit" class="btn btn-success" ng-click="create(user)"
          ng-disabled="form.$invalid || !user.email">
          <i class="fa fa-user-plus"></i>
          @MSG("add.user")
        </button>
      </form>
    </div>
  </div>

  <div class="row" ng-controller="UserGroupsCtrl" data-id="@group.id">

    @ng._msg_confirm_delete()

    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
      <div class="table-responsive">
        <table class="table table-hover table-ellipsis">
          <thead>
            <tr>
              <th class="col-xs-4 col-sm-5">
                @MSG("email")
              </th>
              <th class="hidden-xs col-sm-5 ">
                @MSG("name")
              </th>
              <th class="col-xs-2  col-sm-2 text-right">
              </th>
            </tr>
          </thead>
          <tbody>
            <tr class="ng-cloak" ng-repeat="user in UsersListSvc.users">
              <td>
                <a ng-href="{{jsRoutes.controllers.UsersCtrl.show(user.id).url}}">
                  <i class="fa fa-user"></i>
                  {{ user.email }}
                </a>
              </td>
              <td class="hidden-xs">
                {{ user.name }}
              </td>
              <td>
                <button type="button" class="btn btn-danger btn-xs pull-right"
                  ng-click="confirm(user)">
                  <i class="fa fa-user-times"></i>
                  @MSG("delete")
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
}()(
  libs.webjars("js", "angular-resource"),
  libs.assets("js", "api.helper"),
  libs.assets("js", "ui.parts"),
  libs.assets("js", "api_internal/groups"),
  libs.assets("js", "groups/show"),
  jsRoutes
)

@jsRoutes = {
  @helper.javascriptRouter("jsRoutes")(
    routes.javascript.UsersCtrl.show
  )
}