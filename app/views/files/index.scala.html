@(path:Path, page: Page[File])(implicit request: UserRequest[_])

@import helper._

@layouts.base(MSG("Files")) {

  @common._flashing()

  <div class="row">
    <div class="col-xs-10 col-xs-offset-2">
      @files._upload(path, "html", "files")
    </div>
  </div>
  <div class="row" style="margin-top:10px">
    <h2 style="margin-left: 20px">
    <i class="fa fa-hdd-o fa-lg"></i>
    Attachments</h2>
  </div>
  <div class="row">
    <div class="table-responsive">
      <table class="table table-hover">
        <thead>
          <tr>
            <th class="col-xs-1"></th>
            <th class="col-xs-5">Name</th>
            <th class="col-xs-3 text-right hidden-xs hidden-sm">
              Created On
            </th>
            <th class="col-xs-2 text-right">Size</th>
            <th class="col-xs-2" colspan="2">Action</th>
          </tr>
        </thead>
        <tbody>
          @page.map { f =>
            <tr>
              <td>
                <i class="fa fa-lg @f.icon"></i>
              </td>
              <td>
                @if(f.pdf.?) {
                  <a href="@routes.Files.download(path + f.name, true)">
                    @f.name
                  </a>
                } else {
                  <a href="@routes.Files.show(path + f.name)">
                    @f.name
                  </a>
                }
              </td>
              <td class="text-right hidden-xs hidden-sm">
                @f.created_on.toString("yyyy-MM-dd hh:mm:ss")
              </td>
              <td class="text-right">
                @f.size_pp
              </td>
              <td>
                <a href="@routes.Files.download(path + f.name)">
                  <i class="fa fa-download fa-lg"></i>
                </a>
              </td>

              <td>
                @form(routes.Files.destroy(f.id), 'class -> "form-inline") {
                  @common._previous_uri()
                  <button type="submit" class="btn form-inline-btn">
                    <i class="fa fa-trash-o fa-lg text-danger"></i>
                  </button>
                }
              </td>
            </tr>
          }
        </tbody>
      </table>

      <nav>
        <ul class="pager">
          <li class="previous @if(!page.pager.hasPrev){disabled}">
            <a href="@routes.Files.index(Path(),page.pager.prev)">Previous</a>
          </li>
          <li class="next">
            <a href="@routes.Files.index(Path(),page.pager.next)">Next</a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
}{
  @{_upload(path, "css")}
  <style>
    .table {
      table-layout:fixed;
    }

    .table td {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
  </style>
}(_upload(path, "js"))
