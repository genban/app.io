@(title: String, above_content: Html = Html(""))(
  content: Html)(
  css: Html *)(
  js: Html *)(
  implicit req: UserRequest[_], lang: Lang)

@import helper._

<!DOCTYPE html>
<html lang="en">
  <head>
    <title>@title</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    @libs.webjars("css", "bootstrap")
    @libs.webjars("css", "font-awesome")
    @libs.assets("css", "main")
    @css
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="../assets/js/html5shiv.js"></script>
    <![endif]-->
  </head>
  <body>
    @navbar
    @above_content
    <div class="container">
      @content
    </div>
    @footer
  </body>

  <link rel="shortcut icon" type="image/png"
    href="@routes.Assets.at("images/favicon.png")">
  @libs.webjars("js", "bootstrap")
  @*libs.webjars("js", "backbone")*@
  @*libs.assets("js", "hello")*@
  @js
</html>

@*****************************************************************************@
@*****************************************************************************@
@*****************************************************************************@
@footer = {
  <div class="site-footer">
    <div class="container">
      <div class="row">
        <div class="col-xs-7">
          <p class="text-muted">Â© 2013 zepeng.li@@gmail.com</p>
        </div>
        <div class="col-xs-5">
          <ul class="list-inline">
            <li><a href="#contact"> @MSG("contact")</a></li>
            <li><a href="@routes.Application.about()">@MSG("about")</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
}


@navbar = {
  <div class="navbar-wrapper">

    <div class="navbar navbar-inverse navbar-static-top" role="navigation">
      <div class="container">

        <div class="navbar-header">
          <button type="button" class="navbar-toggle collaped" data-toggle="collapse" data-target="#navbar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="@routes.Application.index">
            <i class="fa fa-foursquare fa-lg"></i> @MSG("app.name")
          </a>
        </div>

        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            @mainMenu
            <li><a href="@routes.Application.wiki()">
              @MSG("wiki")
            </a></li>
          </ul>
          @userSubMenu
        </div>

      </div>
    </div>
  </div>
}

@mainMenu = {
  @req.user.map { u =>
    <li class="dropdown ">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"
        aria-expanded="false">
        @MSG("explore")<span class="caret"></span>
      </a>
      <ul class="dropdown-menu" role="menu">
        <li><a href="#">
          <i class="icon-bar-chart"></i> @MSG("TODO")
        </a></li>
        <li><a href="#">
          <i class="icon-pencil"></i> @MSG("Nothing")
        </a></li>
        <li><a href="#">
          <i class="icon-calendar"></i> @MSG("Empty")
        </a></li>
      </ul>
    </li>

    <li class="dropdown ">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"
        aria-expanded="false">
        @MSG("features")<span class="caret"></span>
      </a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="@routes.Files.index(Path())">
            <i class="fa fa-hdd-o"></i>
            @MSG("controllers.files.name")
          </a>
        </li>
        <li>
          <a href="@routes.EmailTemplates.index()">
            <i class="fa fa-envelope-square"></i>
            @MSG("controllers.email_templates.name")
          </a>
        </li>
        <li>
          <a href="#">
            <i class="icon-picture"></i> @MSG("Nothing")
          </a>
        </li>
      </ul>
    </li>
  }
}

@*****************************************************************************@


@userSubMenu = {
  @req.user match {
    case None => {
      <ul class="nav navbar-nav navbar-right">
        <li><a href="@routes.Sessions.nnew">@MSG("sign.in")</a></li>
      </ul>
    }
    case Some(u) => {
      <ul class="nav navbar-nav user-nav navbar-right">
        <li>
          <a href="@routes.My.dashboard" title="">
            <span class="hidden-xs">
              @u.email
            </span>
            <span class="visible-xs">
              <i class="fa fa-user fa-lg"></i>
              Profile
            </span>
          </a>
        </li>
        <li class="hidden-xs"><a href="#">
          <i class="fa fa-plus fa-lg"></i>
        </a></li>
        <li class="hidden-xs"><a href="#" >
          <i class="fa fa-inbox fa-lg"></i>
        </a></li>
        <li><a href="#">
          <i class="fa fa-cog fa-lg"></i>
          <span class="hidden-sm hidden-md hidden-lg">
            Settings
          </span>
        </a></li>
        <li class="divider"></li>
        <li>
          @form(routes.Sessions.destroy, 'class -> "navbar-form") {
            <button type="submit" class="btn form-inline-btn">
              <i class="fa fa-sign-out fa-lg"></i>
              <span class="hidden-sm hidden-md hidden-lg">
                Sign out
              </span>
            </button>
          }
        </li>
      </ul>
    }
  }
}